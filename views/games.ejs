<h1>All Games</h1>

<!-- FILTER FORM (SERVER-SIDE FILTERING) -->
<form method="GET" action="/games" style="margin-bottom: 20px;">

  <label for="genre">Filter by Genre:</label>
  <select name="genre" id="genre">
    <option value="all">All</option>
    <% ['RPG','Action','Shooter','Sports','Strategy','Adventure','Accessories'].forEach(g => { %>
      <option value="<%= g %>" <%= g === genre ? 'selected' : '' %>>
        <%= g %>
      </option>
    <% }) %>
  </select>

  <label for="platform" style="margin-left: 20px;">Filter by Platform:</label>
  <select name="platform" id="platform">
    <option value="all">All Platforms</option>
    <option value="Xbox">Xbox</option>
    <option value="PS">PlayStation</option>
    <option value="Switch">Switch</option>
    <option value="PC">PC</option>
  </select>

  <button type="submit" style="margin-left: 10px;">Apply</button>
</form>

<!-- GAMES GRID -->
<% if (games.length === 0) { %>
  <p>No games found.</p>
<% } else { %>
  <div style="display:grid; grid-template-columns: repeat(auto-fill,minmax(250px,1fr)); gap:15px;">
    <% games.forEach(game => { %>
      <div style="border:1px solid #ccc; padding:12px; border-radius:6px;">
        <h3><%= game.name %></h3>

        <p><strong>Genre:</strong> <%= game.genre || 'Unknown' %></p>

        <p>
          <strong>Platforms:</strong>
          <%= game.platforms && game.platforms.length
            ? game.platforms.join(', ')
            : 'None' %>
        </p>

        <p><strong>Condition:</strong> <%= game.item_condition %></p>
        <p><strong>Price:</strong> $<%= game.price %></p>
      </div>
    <% }) %>
  </div>
<% } %>

<a href="/" style="display:block; margin-top:20px;">‚Üê Back to Home</a>
